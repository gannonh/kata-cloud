{"type":"snapshot","v":1,"date":"2026-02-16T18:46:55.068Z","author":{"id":"user","name":"User","type":"user"},"content":"# Add linting baseline and scripts\n\nSet up a project linting baseline that can run locally and in CI.\n\n## Scope\nIn scope: lint tooling dependencies, root lint config, and package scripts needed to run lint checks.\nOut of scope: broad style-only refactors unrelated to quality-gate setup.\n\n## Inputs\n[Spec](intent://local/note/spec)\n\n## Definition of Done\n- Lint tooling is configured at repo root for the current TypeScript/React codebase.\n- A `pnpm run lint` command exists and exits non-zero on lint errors.\n- Any unavoidable temporary lint suppressions are documented in the task note.\n\n## Verification\n- `pnpm install`\n- `pnpm run lint`\n\n## Summary (Turn 2)\nImplemented root ESLint baseline and script wiring in scope. Added lint dev dependencies, created `eslint.config.mjs`, ran `pnpm install`, and validated lint behavior end-to-end.\n\n## Acceptance Criteria\n- [x] Root lint config exists and covers TypeScript/React plus repo JS/MJS files.\n- [x] `pnpm run lint` script exists in root `package.json`.\n- [x] `pnpm run lint` exits non-zero on lint errors.\n- [x] Task note records exact files changed and verification command output/evidence.\n\n## Subtasks\n- [x] None.\n\n## References\n- [Spec](intent://local/note/spec)\n- `package.json`\n- `eslint.config.mjs`\n\n## Learnings\n- Disabled `no-undef` for TS files to avoid false positives on type-only globals (`JSX`, `NodeJS`).\n- Added a targeted temporary suppression for `no-control-regex` in `bin/dev-desktop.mjs` because its ANSI escape regex is intentional.\n\n## Changes\n- `package.json`: added `lint` script and lint devDependencies.\n- `eslint.config.mjs`: added root flat ESLint baseline with targeted overrides.\n- `pnpm-lock.yaml`: updated by `pnpm install` with new lint dependency resolution.\n\n```ws-block:cli\n{\n  \"id\": \"fb521f04-fd6e-4238-90cd-fb37eedcaa3c\",\n  \"version\": 1,\n  \"type\": \"cli\",\n  \"createdAt\": \"2026-02-16T18:41:21.510Z\",\n  \"createdBy\": \"agent\",\n  \"command\": \"pnpm install\",\n  \"description\": \"Install dependencies including lint tooling\",\n  \"cwd\": \"/Users/gannonhall/intent/workspaces/following-build-2/kata-cloud\",\n  \"display\": {\n    \"showCommandPrefix\": \"$\"\n  }\n}\n```\n\n```ws-block:cli\n{\n  \"id\": \"b663863f-d0e4-48e4-92f1-8e7c2afe0fbf\",\n  \"version\": 1,\n  \"type\": \"cli\",\n  \"createdAt\": \"2026-02-16T18:41:21.519Z\",\n  \"createdBy\": \"agent\",\n  \"command\": \"pnpm run lint\",\n  \"description\": \"Run lint baseline\",\n  \"cwd\": \"/Users/gannonhall/intent/workspaces/following-build-2/kata-cloud\",\n  \"display\": {\n    \"showCommandPrefix\": \"$\"\n  }\n}\n```\n\n## Verification Results (Turn 2)\n\n- `pnpm install` (exit `0`): installed lint toolchain (`eslint`, `@eslint/js`, `@typescript-eslint/*`, `eslint-plugin-react-hooks`, `eslint-plugin-react-refresh`, `globals`) and updated lockfile.\n- `pnpm run lint` initial run (exit `1`): confirmed non-zero behavior on lint errors. Reported errors in `bin/dev-desktop.mjs` (`no-control-regex`) and TS type-global false positives (`JSX`, `NodeJS`) from `no-undef`.\n- `pnpm run lint` final run (exit `0`): no lint errors; one non-blocking warning remains in `src/main.tsx` from `react-refresh/only-export-components`.","title":"Add linting baseline and scripts"}

---
phase: 08-verification-sweep-and-guardrail-codification
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - bin/playwright-electron-runner.mjs
  - docs/e2e-electron-matrix.md
autonomous: true

must_haves:
  truths:
    - "Electron UAT includes at least one integrated orchestrator + context scenario from prompt submission to reviewable persisted outcome"
    - "The integrated scenario verifies deterministic behavior across success, failure, context diagnostics, and restart persistence"
    - "Suite membership for smoke/uat/full remains explicit and documented"
  artifacts:
    - path: "bin/playwright-electron-runner.mjs"
      provides: "Integrated UAT scenario and deterministic assertion flow"
    - path: "docs/e2e-electron-matrix.md"
      provides: "Updated matrix row(s) showing suite membership for integrated scenario"
  key_links:
    - from: "bin/playwright-electron-runner.mjs"
      to: "docs/e2e-electron-matrix.md"
      via: "Scenario identifiers and suite tags are documented consistently"
      pattern: "orchestrator-.*-uat"
---

<objective>
Codify VERI-02 by adding a full orchestrator + context Electron UAT scenario.

Purpose: Provide one deterministic, reviewable end-to-end desktop flow that exercises orchestrator execution and context behavior together.
Output: Updated Playwright Electron runner scenario coverage and E2E matrix documentation.
</objective>

<execution_context>
<!-- Executor agent has built-in instructions for plan execution and summary creation -->
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/pending/08-verification-sweep-and-guardrail-codification/08-RESEARCH.md
@bin/playwright-electron-runner.mjs
@docs/e2e-electron-matrix.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement integrated orchestrator + context UAT scenario in Electron runner</name>
  <files>
    bin/playwright-electron-runner.mjs
  </files>
  <action>
Add a new UAT-tagged scenario that validates a full story in one run sequence:
1. Successful orchestrator run from prompt.
2. Deterministic failed run with failure diagnostics preserved.
3. Context diagnostics run using unavailable provider path (typed context error metadata retained).
4. Follow-up successful run after provider recovery.
5. App relaunch proving persisted reviewable state/history remains consistent.

Use existing helper functions (`runOrchestratorPrompt`, `getLatestRunSnapshot`, relaunch helpers) and keep assertions state-based where possible. Avoid adding flaky waits or duplicating helper logic.
  </action>
  <verify>
    `pnpm run e2e:electron:uat` passes with the new scenario included.
  </verify>
  <done>
    The Electron UAT suite has at least one integrated orchestrator/context scenario proving prompt-to-persisted-outcome flow.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update E2E matrix to reflect integrated scenario coverage</name>
  <files>
    docs/e2e-electron-matrix.md
  </files>
  <action>
Update the scenario matrix so suite membership is explicit for the integrated scenario:
- Scenario ID and purpose.
- Inclusion in smoke/uat/full.
- Any adjustments to existing scenario descriptions if scope changed.

Keep policy text aligned with runner behavior (UAT scenarios in unified suite; full is superset).
  </action>
  <verify>
    Manual consistency check: every scenario id in `docs/e2e-electron-matrix.md` exists in `bin/playwright-electron-runner.mjs` with matching suite tags.
  </verify>
  <done>
    Matrix and runner are synchronized; suite membership is clear and auditable.
  </done>
</task>

</tasks>

<verification>
- `pnpm run e2e:electron:uat` passes.
- `pnpm run e2e:electron:smoke` still passes (no regression to smoke baseline).
- Runner scenario IDs and matrix documentation match.
</verification>

<success_criteria>
- VERI-02 is satisfied by an integrated orchestrator/context Electron UAT scenario.
- UAT and full suite behavior remains policy-compliant and deterministic.
- E2E matrix explicitly documents the integrated scenario.
</success_criteria>

<output>
After completion, create `.planning/phases/pending/08-verification-sweep-and-guardrail-codification/08-02-SUMMARY.md`
</output>

